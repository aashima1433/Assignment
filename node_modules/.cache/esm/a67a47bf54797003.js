let Joi,Answer,Question;_547‍.x([["default",()=>_547‍.o]]);_547‍.w("joi",[["default",["Joi"],function(v){Joi=v}]]);_547‍.w("../models/answer",[["default",["Answer"],function(v){Answer=v}]]);_547‍.w("../models/question",[["default",["Question"],function(v){Question=v}]]);




const ansController={
   
    async postans(req,res,next){
        const ansSchema = Joi.object({
            description: Joi.string().required(),
            upvote: Joi.number(),
            downvote: Joi.number(),
            accepted: Joi.boolean(),
            queid: Joi.string(),
            userid: Joi.string()
            
        });
        const { error } = ansSchema.validate(req.body);

        if (error) {
            return next(error);
        }

        const { description,upvote,downvote,accepted,queid,userid} = req.body;
    
        // prepare the model
    
        const answer = new Answer({
            description,
            upvote,
            downvote,
            accepted,
            queid: req.params.id,
            userid: req.params.userid
        });
  
        try {
            const result = await user.save();
    
        } 
        
        catch(err) {
            return next(err);
        }
    
    
            res.status(200).json(answer)
        

    },

    async showallans(req,res,next){
        let question,answers;
        try{
            question  = await Question.findOne({_id:req.params.id })
            answers = await Answer.find({queid: req.params.id, accepted: true})
        }
        catch(err)
        {
            return next(err);
        }
        return res.json({question,answers})
    },

}

_547‍.d(ansController);